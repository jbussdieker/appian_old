<%= render 'mastercrumbs' %>
<br>
<%= render 'header' %>

<table class="table">
<tr><td>
<div><%= @commit.message %></div>
<div><%= @commit.author.name %></div>
</td><td>
<%= @commit.sha[0..10] %><br>
<a href="/<%= current_user.name %>/<%= @repository.name %>/tree/<%= @commit.sha %>">Browse Code</a>
</td>
</tr>
</table>
<pre>
<%
result = ""
@commit.parent.diff(@commit).to_s.split("\n").each {|line|
	if line[0] == "+"
		result += "<span style='color: green'>" + line + "</span>\n"
	elsif line[0] == "-"
		result += "<span style='color: red'>" + line + "</span>\n"
	else
		result += line + "A\n"
	end
}
%>
<%= raw result %>
</pre>
